"use strict";(self["webpackChunk_zoom_client_email_desktop"]=self["webpackChunk_zoom_client_email_desktop"]||[]).push([[725],{32725:function(t,e,i){i.r(e),i.d(e,{default:function(){return L}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"to-cc-bcc-wrap tab-focus",attrs:{"aria-label":t.$t("accessibility.recipientsList")}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}]},[t.toList.length?e("span",{staticClass:"collapsed-list"},[e("span",{staticClass:"label"},[t._v("To: ")]),t._l(t.toList,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr)}})}))],2):t._e(),t.ccList.length?e("span",{staticClass:"collapsed-list"},[e("span",{staticClass:"label"},[t._v("Cc: ")]),t._l(t.ccList,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr)}})}))],2):t._e(),t.bccList.length?e("span",{staticClass:"collapsed-list"},[e("span",{staticClass:"label"},[t._v("Bcc: ")]),t._l(t.bccList,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr)}})}))],2):t._e(),t.sumLen>t.LIMIT_NUM?e("div",{staticClass:"avatar-tag-wrap more",attrs:{tabindex:"-1"},on:{click:function(e){return e.stopPropagation(),t.handleMore.apply(null,arguments)}}},[t._v(" +"+t._s(t.sumLen-t.LIMIT_NUM)+" ")]):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}]},[t.to.length?e("div",[e("span",{staticClass:"label"},[t._v("To: ")]),e("div",{staticClass:"recipient-lists-wrap"},t._l(t.to,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr)}})})),1)]):t._e(),t.cc.length?e("div",[e("span",{staticClass:"label"},[t._v("Cc: ")]),e("div",{staticClass:"recipient-lists-wrap"},t._l(t.cc,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr),tabindex:"-1"}})})),1)]):t._e(),t.bcc.length?e("div",[e("span",{staticClass:"label"},[t._v("Bcc:")]),e("div",{staticClass:"recipient-lists-wrap"},t._l(t.bcc,(function(i){return e("avatar-tag",{key:i.emailAddr,attrs:{userInfo:i,isExternal:t.isExternalAddress(i.emailAddr),isGroup:t.isGroupAddress(i.emailAddr),tabindex:"-1"}})})),1)]):t._e(),t.sumLen>t.LIMIT_NUM?e("div",{staticClass:"hide-all avatar-tag-wrap",attrs:{"zm-ta":"thread-item-cc-bcc-show-all",tabindex:"-1"},on:{click:function(e){return e.stopPropagation(),t.handleMore.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("editor.hideAll"))+" ")]):t._e()])])},a=[],n=i(70021),r=i(6041),o=i(56706),l=i(34948),c=function(){var t=this,e=t._self._c;return e("div",{class:["avatar-tag-wrap",{"is-external":t.isExternal,"is-group":t.isGroup}]},[e("zm-popover",{attrs:{placement:"bottom",trigger:"manual","tab-to-leave":!0,"visible-arrow":!1,"open-delay":500,"popper-class":"click-copy-popover"},on:{"after-leave":function(e){t.isCopyDone=!1}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("span",{staticClass:"avatar-wrap tab-focus",attrs:{slot:"reference",tabindex:"0","aria-label":(t.isCopyDone?t.$t("operation.copiedToClipboard"):t.$t("operation.clickToCopy"))+" "+(t.isExternal?t.userInfo.emailAddr:t.getDisplayNameWithoutQuotation()),"aria-role":"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copyEmail.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.copyEmail.apply(null,arguments)},focus:function(e){t.visible=!0},blur:function(e){t.visible=!1},mouseenter:function(e){t.visible=!0},mouseleave:function(e){t.visible=!1}},slot:"reference"},[t.isGroup?e("svg-icon",{staticClass:"icon is-group",attrs:{iconClass:"email-filled"}}):t.isExternal?e("svg-icon",{staticClass:"icon is-external",attrs:{iconClass:"triangle-alert-filled"}}):e("Avatar",{staticClass:"avatar",attrs:{email:t.userInfo.emailAddr,name:t.getDisplayNameWithoutQuotation(),tabindex:"-1","aria-hidden":"true"}}),e("span",{staticClass:"content"},[t._v(" "+t._s(t.displayName)+" ")])],1),e("span",{staticClass:"copy-tips",attrs:{"aria-hidden":"true"}},[t.isCopyDone?[e("svg-icon",{staticClass:"icon copy-tips-icon",attrs:{iconClass:"copy-done"}}),e("span",{staticClass:"copy-tips-text"},[t._v(t._s(t.$t("operation.copiedToClipboard")))])]:[e("svg-icon",{staticClass:"icon copy-tips-icon",attrs:{iconClass:"click-to-copy"}}),e("span",{staticClass:"copy-tips-text"},[t._v(t._s(t.$t("operation.clickToCopy")))])]],2)])],1)},u=[],d=(i(77950),i(33298)),p=i(21942),h=i(37761),f=i(51367),m=i.n(f),v={name:"AvatarTag",components:{Avatar:d.Z,SvgIcon:p.Z},props:{userInfo:{type:Object,default:function(){return{}}},isExternal:{type:Boolean,default:!1},isGroup:{type:Boolean,default:!1}},data:function(){return{isCopyDone:!1,visible:!1}},computed:{displayName:function(t){var e=t.isExternal,i=t.userInfo,s=t.isGroup;return s?i.displayName:e?i.emailAddr:this.getDisplayNameWithoutQuotation()}},methods:{getDisplayNameWithoutQuotation:function(){var t,e,i,s,a,n=this.userInfo.displayName.slice(0,1),r=this.userInfo.displayName.slice(-1),o=this.userInfo.displayName;(n!==r||"'"!==n&&'"'!==n||(o=this.userInfo.displayName.slice(1,-1)),o.includes("@"))?o=null===(t=o.split("@")[0])||void 0===t||null===(e=t.split("."))||void 0===e||null===(i=e.map((function(t){return(0,h.capitalize)(t)})))||void 0===i?void 0:i.join(" "):o=null===(s=o.split(/[\s.]/))||void 0===s||null===(a=s.map((function(t){return(0,h.capitalize)(t)})))||void 0===a?void 0:a.join(" ");return o},copyEmail:function(){var t=this,e=m().sanitize(this.userInfo.emailAddr);e&&navigator.clipboard.writeText(e).then((function(){t.isCopyDone=!0}))["catch"]((function(t){}))}}},y=v,b=i(93483),_=(0,b.Z)(y,c,u,!1,null,"3d6ecf58",null),g=_.exports,A=i(27804),C=i(29648),x=3,w={name:"ToCcBccWrap",components:{AvatarTag:g},props:{to:{type:Array,default:function(){return[]}},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}}},data:function(){return{LIMIT_NUM:x,showMore:!0,nums:0,toList:[],ccList:[],bccList:[],externalUsers:[],groupUsers:[]}},computed:(0,l.Z)((0,l.Z)((0,l.Z)({},(0,C.Se)(["isZmail"])),(0,C.rn)({recipientInfo:function(t){return t.recipientInfo}})),{},{sumLen:function(){return this.to.length+this.cc.length+this.bcc.length}}),watch:{showMore:{handler:function(t){t?this.init():(this.toList=this.reduceRecipients(this.to),this.ccList=this.reduceRecipients(this.cc),this.bccList=this.reduceRecipients(this.bcc))},immediate:!0}},mounted:function(){var t=this;return(0,o.Z)((0,n.Z)().mark((function e(){var i,s,a,o,l;return(0,n.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.to.length+t.cc.length+t.bcc.length,t.showMore=i>x,!t.isZmail){e.next=12;break}if(s=[].concat((0,r.Z)(t.to),(0,r.Z)(t.cc),(0,r.Z)(t.bcc)),a=s.map((function(t){return t.emailAddr})),!a.length){e.next=12;break}return e.next=8,A.p.checkExternalUser(a);case 8:o=e.sent,l=o.emailIdentities,t.externalUsers=l.filter((function(t){return!["valid_identity","mailing_list_no_identity"].includes(t.identity)})).map((function(t){return t.email})),t.groupUsers=l.filter((function(t){return"mailing_list_no_identity"===t.identity})).map((function(t){return t.email}));case 12:case"end":return e.stop()}}),e)})))()},methods:{handleMore:function(){this.showMore=!this.showMore},init:function(){var t=this.to.length,e=this.cc.length;t<=x?(this.toList=this.reduceRecipients(this.to.slice(0,t)),this.ccList=this.reduceRecipients(this.cc.slice(0,x-t)),this.bccList=x-t>=e?this.reduceRecipients(this.bcc.slice(0,x-t-e)):[]):(this.toList=this.reduceRecipients(this.to.slice(0,x)),this.ccList=[],this.bccList=[])},isExternalAddress:function(t){return this.externalUsers.includes(t)},isGroupAddress:function(t){return this.groupUsers.includes(t)},reduceRecipients:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,i){var s=t.recipientInfo.get(i.emailAddr);return s&&(i.displayName=s.displayName),e.push(i),e}),[])}}},k=w,I=(0,b.Z)(k,s,a,!1,null,"52857440",null),L=I.exports}}]);